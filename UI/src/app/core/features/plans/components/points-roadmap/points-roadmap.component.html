<app-edit-request-modal
  [isModalOpen]="isEditRequestsModalOpen"
  (closeModalEvent)="isEditRequestsModalOpen = false">
</app-edit-request-modal>

<app-edit-point-modal
  [isModalOpen]="isEditPointModalOpen"
  (closeModalEvent)="isEditPointModalOpen = false">
</app-edit-point-modal>

<app-create-travel-point-modal
  [isModalOpen]="isCreatePointModalOpen"
  (closeModalEvent)="isCreatePointModalOpen = false"
  (createdPointEvent)="onTravelPointCreated($event)">
</app-create-travel-point-modal>

<app-manage-participants-modal
  [isModalOpen]="isManageParticipantsModalOpen"
  [planId]="this.travelPlan.id"
  (closeModalEvent)="closeManageParticipantsModal()">
</app-manage-participants-modal>

<app-create-plan-modal
  [isModalOpen]="isCreatePlanModalOpen"
  (closeModalEvent)="closeCreatePlanModal()">
</app-create-plan-modal>

<app-change-active-plan-modal
  [isModalOpen]="isChangeActiveModalOpen"
  (closeModalEvent)="closeChangeActiveModal()">
</app-change-active-plan-modal>

<app-user-plans-modal
  [isModalOpen]="isUserPlansModalOpen"
  (closeModalEvent)="closeUserPlansModal()">
</app-user-plans-modal>

<app-user-invitations-modal
  [isModalOpen]="isUserInvitationsModalOpen"
  (closeModalEvent)="closeUserInvitationsModal()">
</app-user-invitations-modal>

<button (click)="isManageParticipantsModalOpen = true" >Manage participants</button>
<button (click)="isCreatePlanModalOpen = true" >Create plan</button>
<button (click)="isChangeActiveModalOpen = true" >Change active plan</button>
<button (click)="isUserPlansModalOpen = true" >User plans</button>
<button (click)="isUserInvitationsModalOpen = true" >My invitations</button>

<p class="active-plan-title">Active plan: {{ this.travelPlan.title }}</p>

<span class="roadmap">
  <ng-container *ngFor="let point of travelPlan?.travelPlanPoints; let i = index; let last = last">
    <div class="node-container">
      <div class="node">
        <app-travel-point
          [travelPoint]="point"
          [updateRequests]="updateRequests.get(point.id) || []"
          [nodeNumber]="point.travelPlanOrderNumber"
          (pointDeletedEvent)="deletePoint($event)"
          (openEditRequestsModalEvent)="onShowEditRequests($event)"
          (openEditPointModalEvent)="onShowEditPoint($event)"
        ></app-travel-point>
      </div>
    </div>
  </ng-container>

  <div class="node add-node" (click)="isCreatePointModalOpen = true">
    <span class="circle">+</span>
  </div>
</span>
